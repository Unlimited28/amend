<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - {org_name}</title>
    <link rel="stylesheet" href="../assets/css/sign-up.css">
</head>
<body>
<div class="signup-container">
    <div class="form-box">
        <div class="logo-header">
            <img src="../assets/img/logo.png" alt="RA Logo">
            <h2>Create Your Account</h2>
        </div>

        <div class="tab-container">
            <button class="tab-btn active" data-form="ambassador">Ambassador</button>
            <button class="tab-btn" data-form="president">President</button>
            <button class="tab-btn" data-form="finance">Finance</button>
            <button class="tab-btn" data-form="superadmin">Admin</button>
        </div>

        <!-- Ambassador Form -->
        <form id="ambassador-form" class="signup-form active">
            <input type="text" name="fullname" placeholder="Full Name" required>
            <input type="email" name="email" placeholder="Email Address" required>
            <select name="association" required><option value="">Select Association...</option></select>
            <input type="password" name="password" placeholder="Password" required>
            <button type="submit" class="signup-btn">Create Ambassador Account</button>
        </form>

        <!-- President Form -->
        <form id="president-form" class="signup-form">
            <input type="text" name="fullname" placeholder="Full Name" required>
            <input type="email" name="email" placeholder="Email Address" required>
            <select name="association" required><option value="">Select Association...</option></select>
            <input type="password" name="passcode" placeholder="President Passcode" required>
            <input type="password" name="password" placeholder="Password" required>
            <button type="submit" class="signup-btn">Create President Account</button>
        </form>

        <!-- Finance Form -->
        <form id="finance-form" class="signup-form">
            <input type="text" name="fullname" placeholder="Full Name" required>
            <input type="email" name="email" placeholder="Email Address" required>
            <input type="password" name="passcode" placeholder="Finance Passcode" required>
            <input type="password" name="password" placeholder="Password" required>
            <button type="submit" class="signup-btn">Create Finance Account</button>
        </form>

        <!-- Super Admin Form -->
        <form id="superadmin-form" class="signup-form">
            <input type="text" name="fullname" placeholder="Full Name" required>
            <input type="email" name="email" placeholder="Email Address" required>
            <input type="password" name="passcode" placeholder="Super Admin Passcode" required>
            <input type="password" name="password" placeholder="Password" required>
            <button type="submit" class="signup-btn">Create Admin Account</button>
        </form>

        <p class="login-link">Already have an account? <a href="login.html">Login</a></p>
    </div>
</div>

<script src="../assets/js/config.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const tabs = document.querySelectorAll('.tab-btn');
        const forms = document.querySelectorAll('.signup-form');
        const associationSelects = document.querySelectorAll('select[name="association"]');

        // Populate associations
        window.OGBC_ASSOCIATIONS.forEach(assoc => {
            associationSelects.forEach(select => {
                const option = document.createElement('option');
                option.value = assoc;
                option.textContent = assoc;
                select.appendChild(option);
            });
        });

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                const formId = tab.getAttribute('data-form') + '-form';
                forms.forEach(form => {
                    form.classList.remove('active');
                    if (form.id === formId) {
                        form.classList.add('active');
                    }
                });
            });
        });

        // Form submission logic
        forms.forEach(form => {
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                const role = form.id.replace('-form', '');
                const passcodeField = form.querySelector('input[name="passcode"]');
                let isValid = true;

                if (passcodeField) {
                    const passcode = passcodeField.value;
                    if (role === 'superadmin' && passcode !== window.ADMIN_PASSCODE) {
                        isValid = false;
                        alert('Invalid Super Admin passcode!');
                    } else if (role === 'president' && passcode !== window.PRESIDENT_PASSCODE) {
                        isValid = false;
                        alert('Invalid President passcode!');
                    } else if (role === 'finance' && passcode !== window.FINANCE_PASSCODE) {
                        isValid = false;
                        alert('Invalid Finance passcode!');
                    }
                }

                if (isValid) {
                    alert('Account created successfully! Please log in.');
                    window.location.href = 'login.html';
                }
            });
        });
    });
</script>
</body>
</html>
